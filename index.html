<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fef6ff;
      color: #333;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff0f5;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    textarea {
      width: 100%;
      height: 200px;
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-family: monospace;
      resize: vertical;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
      font-family: monospace;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 10px;
      margin-right: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 10px;
      background-color: #ffaadd;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #ee99cc;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>æ–‡å­—åˆ—æ›¸ãè¾¼ã¿çŸ­ç¸®ã‚³ãƒ¼ãƒ‰</h2>

    <label for="prefix">ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š</label>
    <input type="text" id="prefix" maxlength="8" oninput="this.value = this.value.replace(/[^0-9a-fA-F]/g, '').slice(0, 8);">

    <label for="textbox1">å¤‰æ›å…ƒã‚³ãƒ¼ãƒ‰ï¼š</label>
    <textarea id="textbox1" placeholder="ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã­"></textarea>
    <button onclick="pasteToTextbox1()">ğŸ“‹ ãƒšãƒ¼ã‚¹ãƒˆ</button>
    <button onclick="convertCode()">â¡ï¸ å¤‰æ›</button>

    <label for="textbox2">å¤‰æ›å¾Œã‚³ãƒ¼ãƒ‰ï¼š</label>
    <textarea id="textbox2" readonly></textarea>
    <button onclick="copyTextbox2()">ğŸ“„ ã‚³ãƒ”ãƒ¼</button>
  </div>

  <script>
    function pasteToTextbox1() {
      navigator.clipboard.readText().then(text => {
        document.getElementById("textbox1").value = text;
      });
    }

    function copyTextbox2() {
      const text = document.getElementById("textbox2").value;
      navigator.clipboard.writeText(text);
    }

    function convertCode() {
      const textbox1 = document.getElementById("textbox1").value;
      const prefixInput = document.getElementById("prefix").value.padEnd(8, '0').toUpperCase();

      let hex = textbox1.replace(/\s+/g, "").toUpperCase();

      // 16æ–‡å­—ãšã¤ã«åˆ†å‰²
      const lines = [];
      for (let i = 0; i < hex.length; i += 16) {
        lines.push(hex.substr(i, 16).padEnd(16, '0'));
      }

      // ãƒ‡ãƒ¼ã‚¿é•·ï¼ˆãƒã‚¤ãƒˆæ•°ï¼‰è¨ˆç®—ï¼šå…¨ä½“ã®ãƒã‚¤ãƒˆæ•° = hexã®é•·ã• / 2
      const dataLength = hex.length / 2;
      const lengthHex = dataLength.toString(16).padStart(4, '0').toUpperCase();

      lines.unshift(`0102${lengthHex}${prefixInput}`);
      lines.push("00000000000000FF");

      const output = lines.map(line => line.length > 8 ? `${line.substr(0, 8)} ${line.substr(8, 8)}` : line).join("\n");
      document.getElementById("textbox2").value = output;
    }
  </script>
</body>
</html>
